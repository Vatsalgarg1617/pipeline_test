pipeline{
     agent any
    
    
   stages{
      stage('Compile Stage'){

     steps{
      withMaven(maven : 'Maven'){
         bat 'cd internal_folder & mvn clean install'
        }
     }
   }
  
    stage('Testing Stage'){

     steps{
      withMaven(maven : 'Maven'){
         bat 'cd internal_folder & mvn test'


        }
     }
   }


   stage ('SonarQube Analysis'){
     steps{
     withSonarQubeEnv('sonarqube') {
    sh 'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.2:sonar'

         }
    }
}


     stage('Deployment Stage'){

     steps{
      withMaven(maven : 'Maven'){

         bat 'cd internal_folder & mvn install'

        }
     }
   }

           
   }
}
